<form (ngSubmit)="submitSubscription()" [formGroup]="subscriptionForm">
  <div class="field">
    <label class="label">Renouvellement pour</label>
    <div class="control">
      <select (change)="updateAmount()" class="input is-fullwidth" formControlName="renewal" type="text">
        <option value="0">Aucun</option>
        <option value="7">sans chambre (9€) - {{ formatDate(12) }}</option>
        <option value="1">1 mois (9€) - {{ formatDate(1) }}</option>
        <option value="2">2 mois (18€) - {{ formatDate(2) }}</option>
        <option value="3">3 mois (27€) - {{ formatDate(3) }}</option>
        <option value="4">4 mois (36€) - {{ formatDate(4) }}</option>
        <option value="5">5 mois (45€) - {{ formatDate(5) }}</option>
        <option value="6">1 an (50€) - {{ formatDate(12) }}</option>
      </select>
    </div>
  </div>
  <div class="field">
    <label class="label">Matériel à ajouter</label>
    <ng-container *ngIf="products$ | async as products">
      <div class="control" *ngFor="let product of products; let i = index" formArrayName="products">
        <div class="form-check" [formGroupName]="i">
          <label class="checkbox">
            <input formControlName="checked" (change)="updateAmount()" type="checkbox" value="">
            {{product.name}} ({{product.sellingPrice}} €)
          </label>
        </div>
      </div>
    </ng-container>
  </div>
  <div class="field">
    <label class="label">Montant : {{ amountToPay }} €</label>
    <div class="control">
      <select class="input is-fullwidth" formControlName="paidWith" type="text">
        <option value="">-- Choisir moyen de paiement --</option>
        <option *ngFor="let pm of paymentMethods$ | async" value="{{ pm.id }}">{{ pm.name }}</option>
      </select>
    </div>
  </div>
  <button class="button is-success is-fullwidth" type="submit" [disabled]="cotisationDisabled">Valider</button>
</form>
